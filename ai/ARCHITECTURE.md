# FilDOS AI Architecture

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         FilDOS AI System                                 │
│                                                                          │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │                     Model Layer                                 │    │
│  │                                                                  │    │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐      │    │
│  │  │  SigLIP  │  │    E5    │  │  MiniLM  │  │ EasyOCR  │      │    │
│  │  │  768 dim │  │  768 dim │  │  384 dim │  │   Text   │      │    │
│  │  │  Images  │  │   Text   │  │ OCR Text │  │Extraction│      │    │
│  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘      │    │
│  │                                                                  │    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                                                          │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │                   Processing Pipeline                           │    │
│  │                                                                  │    │
│  │  Image Upload                    Text Upload                    │    │
│  │       ↓                               ↓                         │    │
│  │  ┌─────────┐                     ┌─────────┐                   │    │
│  │  │ SigLIP  │                     │   E5    │                   │    │
│  │  │ Encode  │                     │ Encode  │                   │    │
│  │  │NORMALIZE│                     │NORMALIZE│                   │    │
│  │  └─────────┘                     │+ prefix │                   │    │
│  │       ↓                          └─────────┘                   │    │
│  │  ┌─────────┐                          ↓                        │    │
│  │  │   OCR   │                    768-dim vector                 │    │
│  │  │ Extract │                          ↓                        │    │
│  │  └─────────┘                    ┌──────────┐                   │    │
│  │       ↓                          │ Weaviate │                   │    │
│  │  Text found?                     │  Store   │                   │    │
│  │   Yes ↓  No                      └──────────┘                   │    │
│  │  ┌─────────┐  ↓                                                │    │
│  │  │ MiniLM  │  Skip                                             │    │
│  │  │ Encode  │                                                    │    │
│  │  │NORMALIZE│                                                    │    │
│  │  └─────────┘                                                    │    │
│  │       ↓                                                          │    │
│  │  384-dim vector                                                 │    │
│  │       ↓                                                          │    │
│  │  ┌──────────────────┐                                          │    │
│  │  │    Weaviate      │                                          │    │
│  │  │  Store Both:     │                                          │    │
│  │  │  - image_vector  │                                          │    │
│  │  │  - text_vector   │                                          │    │
│  │  └──────────────────┘                                          │    │
│  │                                                                  │    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                                                          │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │                     Search Pipeline                             │    │
│  │                                                                  │    │
│  │                    User Query                                   │    │
│  │                         ↓                                       │    │
│  │              ┌──────────┴──────────┐                           │    │
│  │              ↓                     ↓                            │    │
│  │      ┌──────────────┐      ┌──────────────┐                   │    │
│  │      │   SigLIP     │      │      E5      │                   │    │
│  │      │ Text Encode  │      │ Text Encode  │                   │    │
│  │      │  NORMALIZE   │      │  NORMALIZE   │                   │    │
│  │      │              │      │ + "query:"   │                   │    │
│  │      └──────────────┘      └──────────────┘                   │    │
│  │              ↓                     ↓                            │    │
│  │      768-dim vector        768-dim vector                      │    │
│  │              ↓                     ↓                            │    │
│  │      ┌──────────────┐      ┌──────────────┐                   │    │
│  │      │  Weaviate    │      │  Weaviate    │                   │    │
│  │      │    Search    │      │    Search    │                   │    │
│  │      │ image_vector │      │ text_vector  │                   │    │
│  │      │  (images)    │      │(docs + OCR)  │                   │    │
│  │      └──────────────┘      └──────────────┘                   │    │
│  │              ↓                     ↓                            │    │
│  │         Results              Results                           │    │
│  │              ↓                     ↓                            │    │
│  │              └──────────┬──────────┘                           │    │
│  │                         ↓                                       │    │
│  │                  ┌─────────────┐                               │    │
│  │                  │   Combine   │                               │    │
│  │                  │ & Rank by   │                               │    │
│  │                  │  Similarity │                               │    │
│  │                  │   Score     │                               │    │
│  │                  │  (0.0-1.0)  │                               │    │
│  │                  └─────────────┘                               │    │
│  │                         ↓                                       │    │
│  │                   Top K Results                                │    │
│  │                                                                  │    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```